{% extends "base.html" %}

{% block title %}Phishing Simulation Platform{% endblock %}

{% block content %}
<div class="card">
    <div class="card-header">
        <i class="fas fa-shield-alt"></i>
        <h1>Phishing Simulation Platform</h1>
    </div>
    <p>Ethical phishing campaigns for cybersecurity training</p>
</div>

<div class="stats-grid">
    <div class="stat-card">
        <i class="fas fa-bullhorn"></i>
        <h3>{{ campaigns_count or 0 }}</h3>
        <p>Active Campaigns</p>
    </div>
    <div class="stat-card">
        <i class="fas fa-users"></i>
        <h3>{{ users_count or 0 }}</h3>
        <p>Registered Employees</p>
    </div>
    <div class="stat-card">
        <i class="fas fa-chart-line"></i>
        <h3>{{ avg_progress|round(1) or 0 }}%</h3>
        <p>Average Training Progress</p>
    </div>
    <div class="stat-card">
        <i class="fas fa-shield-alt"></i>
        <h3>{{ success_rate|round(1) or 0 }}%</h3>
        <p>Overall Success Rate</p>
    </div>
</div>

<div class="card">
    <h2>ðŸš€ Quick Actions</h2>
    <p>Get started with your phishing awareness initiatives:</p>
    <div style="display: flex; gap: 1rem; flex-wrap: wrap; margin-top: 1rem;">
        <a href="{{ url_for('main.new_campaign') }}" class="btn"><i class="fas fa-plus"></i> Create New Campaign</a>
        <a href="{{ url_for('templates.list_templates') }}" class="btn btn-secondary"><i class="fas fa-edit"></i> Manage Templates</a>
        <a href="{{ url_for('analytics.dashboard') }}" class="btn btn-secondary"><i class="fas fa-chart-bar"></i> View Analytics</a>
        <a href="{{ url_for('main.education') }}" class="btn btn-secondary"><i class="fas fa-graduation-cap"></i> Education Center</a>
    </div>
</div>

<div class="card">
    <h2>ðŸ“Š Recent Campaigns</h2>
    {% if campaigns %}
    <table>
        <thead>
            <tr>
                <th><i class="fas fa-tag"></i> Name</th>
                <th><i class="fas fa-calendar"></i> Created</th>
                <th><i class="fas fa-envelope"></i> Emails Sent</th>
                <th><i class="fas fa-cogs"></i> Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for campaign in campaigns %}
            <tr>
                <td>{{ campaign.name }}</td>
                <td>{{ campaign.created_at.strftime('%b %d, %Y') }}</td>
                <td>{{ campaign.emails|length }}</td>
                <td>
                    <a href="{{ url_for('campaigns.campaign_detail', campaign_id=campaign.id) }}" class="btn btn-success" style="padding: 6px 12px; font-size: 0.9rem;"><i class="fas fa-eye"></i> View</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <div class="alert alert-info">
        <i class="fas fa-info-circle"></i>
        <div>
            <strong>No campaigns yet!</strong> Start by creating your first phishing awareness campaign to educate your employees.
        </div>
    </div>
    {% endif %}
</div>

<div class="card">
    <h2>ðŸ’¡ Getting Started Guide</h2>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem; margin-top: 1rem;">
        <div style="padding: 1rem; background: var(--light-bg); border-radius: 8px; border-left: 4px solid var(--info-color);">
            <h4><i class="fas fa-envelope"></i> 1. Create Templates</h4>
            <p>Design realistic phishing email templates that mimic common attack vectors your employees might encounter.</p>
        </div>
        <div style="padding: 1rem; background: var(--light-bg); border-radius: 8px; border-left: 4px solid var(--warning-color);">
            <h4><i class="fas fa-users"></i> 2. Add Employees</h4>
            <p>Import your employee list and organize them by department for targeted, effective training campaigns.</p>
        </div>
        <div style="padding: 1rem; background: var(--light-bg); border-radius: 8px; border-left: 4px solid var(--success-color);">
            <h4><i class="fas fa-play"></i> 3. Launch Campaigns</h4>
            <p>Send simulated phishing emails and track employee responses in real-time with detailed analytics.</p>
        </div>
        <div style="padding: 1rem; background: var(--light-bg); border-radius: 8px; border-left: 4px solid #667eea;">
            <h4><i class="fas fa-graduation-cap"></i> 4. Educate & Improve</h4>
            <p>Use comprehensive analytics and education modules to continuously improve employee awareness.</p>
        </div>
    </div>
</div>
{% endblock %}
